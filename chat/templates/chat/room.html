{% extends 'base.html' %}
{% load static %}

{% block meta %}
<link rel="stylesheet" href="{% static 'chat/css/chat.css' %}" />


<title>Chat Admin</title>
{% endblock meta %}

{% block content %}
{{ username|json_script:"username" }}
{{ room_name|json_script:"room_name" }}
<div class="container app">
    <div class="row clearfix">
        <div class="col-lg-12">
            <div class="card chat-app">
                {% if is_super_user %}
                    <div id="plist" class="people-list">

                        <div class="plist-header clearfix bg-custom-2 p-3">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h6 class="m-0 text-center">Daftar Pelanggan</h6>
                                </div>
                            </div>
                        </div>

                        <ul class="list-unstyled chat-list mt-2 mb-0">
                            {% for room in rooms %}
                                {% if room.name == current_room.name %}
                                    <li class="clearfix active">
                                {% else %}
                                    <li class="clearfix">
                                {% endif %}
                                        <div class="about">
                                            <a href="{% url 'chat:room' room_name=room.name %}"class="name">{{ room.user1.username }}</a>
                                        </div>
                                    </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}

                {% if is_super_user %}
                    <div class="chat">
                {% else %}
                    <div class="chat" id="chat-2">
                {% endif %}
                    <div class="chat-header clearfix bg-custom-1 p-3">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="chat-about">
                                    {% if is_super_user %}
                                    <h6 class="m-0"> {{ current_room.user1 }} </h6>
                                    {% else %}
                                    <h6 class="m-0"> Admin </h6>
                                    {% endif %}

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-history bg-custom-3">
                        <ul class="mb-0" id="chat-log">
                        </ul>
                    </div>
                    <div class="chat-message clearfix">
                        <div class="input-group mb-0">
                            <input type="text" class="form-control" id="chat-message-input" placeholder="Write your message here...">                                    
                            <div class="input-group-append">
                                <button class="btn btn-outline-info" id="chat-message-submit">
                                    <span class="material-icons" id="send-logo">send</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="{% static 'chat/js/reconnecting-websocket.js' %}"></script>
<script src="{% static 'chat/js/chat.js' %}"></script>

{% endblock content %}
